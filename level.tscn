[gd_scene load_steps=9 format=3 uid="uid://d1sxs5ucwt5cw"]

[ext_resource type="Script" uid="uid://djv7ewwf01a1e" path="res://level.gd" id="1_vonw3"]
[ext_resource type="PackedScene" uid="uid://deu8jlcltfg5f" path="res://finish_line.tscn" id="2_oi3di"]
[ext_resource type="PackedScene" uid="uid://djrkl3l50j1u8" path="res://racer/snail.tscn" id="3_0b4ue"]
[ext_resource type="PackedScene" uid="uid://droahx1p02vyo" path="res://traps/strawberry.tscn" id="3_f2txt"]
[ext_resource type="Script" uid="uid://bew22gi0e2nxs" path="res://ui.gd" id="5_f2txt"]
[ext_resource type="PackedScene" uid="uid://eh8txnyk01aj" path="res://player_options/player_options.tscn" id="6_n6hdu"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_oi3di"]
size = Vector2(20, 111)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_1ainy"]
content_margin_left = 16.0
content_margin_top = 8.0
content_margin_right = 16.0
content_margin_bottom = 8.0
bg_color = Color(0.72777236, 0.3263314, 0.25760457, 1)

[node name="Level" type="Node2D"]
script = ExtResource("1_vonw3")

[node name="RaceTrack" type="Node2D" parent="."]

[node name="TrapsSafeMargins" type="Node2D" parent="RaceTrack"]
unique_name_in_owner = true

[node name="Left" type="Marker2D" parent="RaceTrack/TrapsSafeMargins"]
position = Vector2(47, 50)

[node name="Right" type="Marker2D" parent="RaceTrack/TrapsSafeMargins"]
position = Vector2(334, 50)

[node name="Tracks" type="Node2D" parent="RaceTrack"]
unique_name_in_owner = true

[node name="Track1" type="Line2D" parent="RaceTrack/Tracks"]
points = PackedVector2Array(0, 0, 400, 0)
default_color = Color(0.73119575, 0.5272471, 0.15017584, 1)

[node name="Track2" type="Line2D" parent="RaceTrack/Tracks"]
position = Vector2(0, 50)
points = PackedVector2Array(0, 0, 400, 0)
default_color = Color(0.73119575, 0.5272471, 0.15017584, 1)

[node name="Track3" type="Line2D" parent="RaceTrack/Tracks"]
position = Vector2(0, 100)
points = PackedVector2Array(0, 0, 400, 0)
default_color = Color(0.73119575, 0.5272471, 0.15017584, 1)

[node name="FinishLine" parent="RaceTrack" instance=ExtResource("2_oi3di")]
z_index = 1
position = Vector2(380, 50)

[node name="FullStop" type="Area2D" parent="RaceTrack"]
position = Vector2(407, 0)
collision_layer = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="RaceTrack/FullStop"]
position = Vector2(0, 49.5)
shape = SubResource("RectangleShape2D_oi3di")

[node name="Traps" type="Node2D" parent="RaceTrack"]
unique_name_in_owner = true

[node name="Strawberry" parent="RaceTrack/Traps" instance=ExtResource("3_f2txt")]
position = Vector2(73, 3)

[node name="Strawberry2" parent="RaceTrack/Traps" instance=ExtResource("3_f2txt")]
position = Vector2(120, 48)

[node name="Strawberry3" parent="RaceTrack/Traps" instance=ExtResource("3_f2txt")]
position = Vector2(98, 100)

[node name="Strawberry4" parent="RaceTrack/Traps" instance=ExtResource("3_f2txt")]
position = Vector2(274, 98)

[node name="Strawberry6" parent="RaceTrack/Traps" instance=ExtResource("3_f2txt")]
position = Vector2(289, -3)

[node name="Strawberry5" parent="RaceTrack/Traps" instance=ExtResource("3_f2txt")]
position = Vector2(269, 52)

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(193, 98)
zoom = Vector2(2.5, 2.5)

[node name="Racers" type="Node2D" parent="."]

[node name="Snail" parent="Racers" instance=ExtResource("3_0b4ue")]
position = Vector2(16, 0)
max_speed = 50.0

[node name="Snail2" parent="Racers" instance=ExtResource("3_0b4ue")]
modulate = Color(0, 0.6429526, 0.9807605, 1)
position = Vector2(16, 50)

[node name="Snail3" parent="Racers" instance=ExtResource("3_0b4ue")]
modulate = Color(0.8407753, 0.2611684, 0, 1)
position = Vector2(16, 100)

[node name="UI" type="CanvasLayer" parent="."]
script = ExtResource("5_f2txt")

[node name="GameOver" type="PanelContainer" parent="UI"]
z_index = 1
anchors_preset = -1
anchor_left = 0.321
anchor_top = 0.296
anchor_right = 0.68200004
anchor_bottom = 0.68200004
offset_left = -3.5697937
offset_top = 0.19200134
offset_right = 0.113708496
offset_bottom = 0.063964844
grow_horizontal = 2
grow_vertical = 2

[node name="VBoxContainer" type="VBoxContainer" parent="UI/GameOver"]
layout_mode = 2
alignment = 2

[node name="Label" type="Label" parent="UI/GameOver/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 0
theme_override_font_sizes/font_size = 28
text = "Race over"
horizontal_alignment = 1

[node name="HBoxContainer" type="HBoxContainer" parent="UI/GameOver/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
alignment = 1

[node name="Label" type="Label" parent="UI/GameOver/VBoxContainer/HBoxContainer"]
layout_mode = 2
text = "The winner is: "
horizontal_alignment = 1

[node name="Winner" type="Label" parent="UI/GameOver/VBoxContainer/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2

[node name="MoneyResultPlayer1" type="Label" parent="UI/GameOver/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 0
horizontal_alignment = 1

[node name="MoneyResultPlayer2" type="Label" parent="UI/GameOver/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 0
horizontal_alignment = 1

[node name="VBoxContainer" type="VBoxContainer" parent="UI/GameOver/VBoxContainer"]
layout_mode = 2
theme_override_constants/separation = 8

[node name="Question" type="Label" parent="UI/GameOver/VBoxContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "
Up for another round?"
horizontal_alignment = 1

[node name="Restart" type="Button" parent="UI/GameOver/VBoxContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 4
text = "   It can't end in a loss   "

[node name="Quit" type="Button" parent="UI/GameOver/VBoxContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 4
text = "   Nah man, I'm done   "

[node name="PlayerOptions" parent="UI" instance=ExtResource("6_n6hdu")]
anchor_left = 0.028
anchor_top = 0.91400003
anchor_right = 0.028
anchor_bottom = 0.91400003
offset_left = -1.2560005
offset_top = -210.27203
offset_right = 415.744
offset_bottom = -0.2720337

[node name="PlayerOptions2" parent="UI" instance=ExtResource("6_n6hdu")]
anchor_left = 0.97300005
anchor_top = 0.91400003
anchor_right = 0.97300005
anchor_bottom = 0.91400003
offset_left = -416.896
offset_top = -210.27203
offset_right = 0.104003906
offset_bottom = -0.2720337
theme_override_styles/panel = SubResource("StyleBoxFlat_1ainy")
player_name = "Player 2"

[node name="StartRace" type="Button" parent="UI"]
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.91400003
anchor_right = 0.5
anchor_bottom = 0.91400003
offset_left = -80.0
offset_top = -53.272034
offset_right = 81.0
offset_bottom = -0.2720337
grow_horizontal = 2
grow_vertical = 0
theme_override_font_sizes/font_size = 32
text = "    RACE!    "

[connection signal="body_entered" from="RaceTrack/FinishLine" to="." method="_on_finish_line_body_entered"]
[connection signal="body_entered" from="RaceTrack/FullStop" to="." method="_on_full_stop_body_entered"]
[connection signal="pressed" from="UI/GameOver/VBoxContainer/VBoxContainer/Restart" to="UI" method="_on_restart_pressed"]
[connection signal="pressed" from="UI/GameOver/VBoxContainer/VBoxContainer/Quit" to="UI" method="_on_quit_pressed"]
[connection signal="place_trap" from="UI/PlayerOptions" to="." method="_on_player_options_place_trap"]
[connection signal="place_trap" from="UI/PlayerOptions2" to="." method="_on_player_options_place_trap"]
[connection signal="pressed" from="UI/StartRace" to="UI" method="_on_start_race_pressed"]
